[gd_scene load_steps=6 format=3 uid="uid://bl22i0rmu3guf"]

[ext_resource type="Resource" uid="uid://csd5dgnn2qenj" path="res://inventory/player_inventory.tres" id="2_87pht"]
[ext_resource type="Texture2D" uid="uid://cybjd4y3bfnjk" path="res://Art/postac.png" id="2_v2ckw"]
[ext_resource type="PackedScene" uid="uid://ddsqbav6ysoc6" path="res://inventory/inventory_ui.tscn" id="3_87pht"]

[sub_resource type="GDScript" id="GDScript_lm2ka"]
script/source = "extends CharacterBody2D

@export var speed: int = 300
@export var health: int = 500
@export var hunger: int = 100
@export var can_move: bool = true
@onready var hunger_bar: Node = get_node(\"../UI_Player/HungerBar\")
@onready var health_bar: Node = get_node(\"../UI_Player/HealthBar\")


@export var inventory: Inventory

func get_handle_input():
	var input_direction: Vector2 = Input.get_vector(\"move_left\", \"move_right\",\"move_up\",\"move_down\")
	velocity = input_direction *speed
func _physics_process(_delta):
	get_handle_input()
	move_and_slide()
	z_index = int(global_position.y)


func _on_hunger_timer_timeout():
	if hunger >0:
		hunger -= 1
	else:
		if health > 0:
			health-=1
	print(\"Hunger:\", hunger)
	print(\"Health:\", health)
	
	hunger = max(hunger, 0)
	health = max(health, 0)
	
	hunger_bar.value = hunger
	health_bar.value = health

func _ready():
	print(\"Grupy gracza:\", get_groups())
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_qq6ry"]
size = Vector2(27, 26)

[node name="Player" type="CharacterBody2D" groups=["player"]]
collision_layer = 4
script = SubResource("GDScript_lm2ka")
hunger = 300
inventory = ExtResource("2_87pht")

[node name="Sprite2D" type="Sprite2D" parent="."]
texture = ExtResource("2_v2ckw")

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(0.5, 7)
shape = SubResource("RectangleShape2D_qq6ry")

[node name="Camera2D" type="Camera2D" parent="."]
zoom = Vector2(1.5, 1.5)
position_smoothing_speed = 8.0

[node name="HungerTimer" type="Timer" parent="."]
autostart = true

[node name="Inventory_UI" parent="." instance=ExtResource("3_87pht")]
offset_left = -256.0
offset_top = -128.0
offset_right = -128.0
offset_bottom = -64.0
scale = Vector2(4, 4)

[connection signal="timeout" from="HungerTimer" to="." method="_on_hunger_timer_timeout"]
